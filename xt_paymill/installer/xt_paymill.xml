<?xml version="1.0" encoding="UTF-8"?>
<xtcommerceplugin>
    <title>PAYMILL</title>
    <version>2.1.0</version>
    <code>xt_paymill</code>
    <url>http://www.paymill.de</url>
    <description>Paymill Payment Plugin</description>
    <icon>icon_paymill.png</icon>
    <type>payment</type>
    <payment>
        <payment_code>xt_paymill</payment_code>
        <payment_dir>xt_paymill</payment_dir>
        <payment_icon></payment_icon>
        <payment_tpl>xt_paymill.html</payment_tpl>
        <de>
            <title>PAYMILL</title>
            <description></description>
        </de>
        <en>
            <title>PAYMILL</title>
            <description></description>
        </en>
    </payment>
    <db_install>
        <![CDATA[
            $db->Execute("INSERT INTO ".TABLE_PAYMENT_COST." (`payment_id`, `payment_geo_zone`, `payment_country_code`, `payment_type_value_from`, `payment_type_value_to`, `payment_price`,`payment_allowed`) VALUES(".$payment_id.", 24, '', 0, 10000.00, 0, 1);");
            $db->Execute("INSERT INTO ".TABLE_PAYMENT_COST." (`payment_id`, `payment_geo_zone`, `payment_country_code`, `payment_type_value_from`, `payment_type_value_to`, `payment_price`,`payment_allowed`) VALUES(".$payment_id.", 25, '', 0, 10000.00, 0, 1);");
            $db->Execute("INSERT INTO ".TABLE_PAYMENT_COST." (`payment_id`, `payment_geo_zone`, `payment_country_code`, `payment_type_value_from`, `payment_type_value_to`, `payment_price`,`payment_allowed`) VALUES(".$payment_id.", 26, '', 0, 10000.00, 0, 1);");
            $db->Execute("INSERT INTO ".TABLE_PAYMENT_COST." (`payment_id`, `payment_geo_zone`, `payment_country_code`, `payment_type_value_from`, `payment_type_value_to`, `payment_price`,`payment_allowed`) VALUES(".$payment_id.", 27, '', 0, 10000.00, 0, 1);");
            $db->Execute("INSERT INTO ".TABLE_PAYMENT_COST." (`payment_id`, `payment_geo_zone`, `payment_country_code`, `payment_type_value_from`, `payment_type_value_to`, `payment_price`,`payment_allowed`) VALUES(".$payment_id.", 28, '', 0, 10000.00, 0, 1);");
            $db->Execute("INSERT INTO ".TABLE_PAYMENT_COST." (`payment_id`, `payment_geo_zone`, `payment_country_code`, `payment_type_value_from`, `payment_type_value_to`, `payment_price`,`payment_allowed`) VALUES(".$payment_id.", 29, '', 0, 10000.00, 0, 1);");
            $db->Execute("INSERT INTO ".TABLE_PAYMENT_COST." (`payment_id`, `payment_geo_zone`, `payment_country_code`, `payment_type_value_from`, `payment_type_value_to`, `payment_price`,`payment_allowed`) VALUES(".$payment_id.", 30, '', 0, 10000.00, 0, 1);");
            $db->Execute("INSERT INTO ".TABLE_PAYMENT_COST." (`payment_id`, `payment_geo_zone`, `payment_country_code`, `payment_type_value_from`, `payment_type_value_to`, `payment_price`,`payment_allowed`) VALUES(".$payment_id.", 31, '', 0, 10000.00, 0, 1);");
        ]]>
    </db_install>
    <plugin_code>
        <code>
            <hook>module_checkout.php:checkout_process_data</hook>
            <phpcode>
                <![CDATA[
                    if ($payment_code === "xt_paymill") {
                        require_once(_SRV_WEBROOT . _SRV_WEB_PLUGINS . '/xt_paymill/classes/payment/' . 'class.xt_paymill.php');
                        $payment_module_data = new xt_paymill();
                        $payment_module_data->checkoutProcessData($subpayment_code);
                    }
                ]]>
            </phpcode>
            <order>1</order>
            <active>1</active>
        </code>
        <code>
            <hook>module_checkout.php:checkout_pre_data</hook>
            <phpcode>
                <![CDATA[
                    if ($_SESSION['selected_payment'] === "xt_paymill" && substr($_SESSION['selected_payment_sub'], 0, 4) === '_cc_') {
                        define('TEXT_PAYMENT_' . strtoupper($_SESSION['selected_payment_sub']), TEXT_PAYMILL_CC_NAME);
                    }
                    
                    if ($_SESSION['selected_payment'] === "xt_paymill" && substr($_SESSION['selected_payment_sub'], 0, 4) === '_dd_') {
                        define('TEXT_PAYMENT_' . strtoupper($_SESSION['selected_payment_sub']), TEXT_PAYMILL_ELV_NAME);
                    }
                ]]>
            </phpcode>
            <order>2</order>
            <active>1</active>
        </code>
    </plugin_code>
    <configuration_payment>
        <config>
            <key>ACTIVATE_PAYMILLCC</key>
            <type>dropdown</type>
            <value>true</value>
            <url>conf_truefalse</url>
            <sort_order>5</sort_order>
            <de>
                <title>PAYMILL Kreditkarte aktivieren</title>
            </de>
            <en>
                <title>Activate PAYMILL Creditcard</title>
            </en>
        </config>
        <config>
            <key>ACTIVATE_PAYMILLELV</key>
            <type>dropdown</type>
            <value>true</value>
            <url>conf_truefalse</url>
            <sort_order>5</sort_order>
            <de>
                <title>PAYMILL Lastschrift aktivieren</title>
            </de>
            <en>
                <title>Activate PAYMILL Direct Debit</title>
            </en>
        </config>
        <config>
            <key>PRIVATE_API_KEY</key>
            <type>textfield</type>
            <de>
                <title>Geheimer API Key</title>
            </de>
            <en>
                <title>Private API Key</title>
            </en>
        </config>
        <config>
            <key>PUBLIC_API_KEY</key>
            <type>textfield</type>
            <de>
                <title>Öffentlicher API Key</title>
            </de>
            <en>
                <title>Public API Key</title>
            </en>
        </config>
        <config>
            <key>DIFFERENT_AMOUNT</key>
            <type>textfield</type>
            <value>10</value>
            <de>
                <title>Abweichender Betrag</title>
            </de>
            <en>
                <title>Different amount</title>
            </en>
        </config>
        <config>
            <key>DEBUG_MODE</key>
            <type>dropdown</type>
            <value>false</value>
            <url>conf_truefalse</url>
            <de>
                <title>Debug Modus</title>
            </de>
            <en>
                <title>Debug Mode</title>
            </en>
        </config>
        <config>
            <key>SHOW_PAYMILL_LABEL</key>
            <type>dropdown</type>
            <value>true</value>
            <url>conf_truefalse</url>
            <de>
                <title>PAYMILL Label einblenden</title>
            </de>
            <en>
                <title>Show PAYMILL label</title>
            </en>
        </config>
    </configuration_payment>
    <language_content>
        <phrase>
            <key>TEXT_PAYMILL_CC_NAME</key>
            <class>store</class>
            <de>
                <value>Kreditkarte</value>
            </de>
            <en>
                <value>Creditcard</value>
            </en>
        </phrase>
        <phrase>
            <key>TEXT_PAYMILL_ELV_NAME</key>
            <class>store</class>
            <de>
                <value>Lastschrift</value>
            </de>
            <en>
                <value>Direct Debit</value>
            </en>
        </phrase>
        <phrase>
            <key>TEXT_PAYMILL_CC_CCNR</key>
            <class>store</class>
            <de>
                <value>Kreditkartennummer</value>
            </de>
            <en>
                <value>Credit Card Number</value>
            </en>
        </phrase>
        <phrase>
            <key>TEXT_PAYMILL_CC_CVC</key>
            <class>store</class>
            <de>
                <value>Kreditkartenprüfnummer</value>
            </de>
            <en>
                <value>Credit Card Verification Number</value>
            </en>
        </phrase>
        <phrase>
            <key>TEXT_PAYMILL_CC_HOLDER</key>
            <class>store</class>
            <de>
                <value>Karteninhaber</value>
            </de>
            <en>
                <value>Credit Card Holder</value>
            </en>
        </phrase>
        <phrase>
            <key>TEXT_PAYMILL_CC_DATE</key>
            <class>store</class>
            <de>
                <value>Gültigkeitsdatum (MM/JJJJ)</value>
            </de>
            <en>
                <value>Expiry date (MM/YYYY)</value>
            </en>
        </phrase>
        <phrase>
            <key>TEXT_PAYMILL_ELV_ACCOUNT_NUMBER</key>
            <class>store</class>
            <de>
                <value>Kontonummer</value>
            </de>
            <en>
                <value>Account Number</value>
            </en>
        </phrase>
        <phrase>
            <key>TEXT_PAYMILL_ELV_BANK_CODE</key>
            <class>store</class>
            <de>
                <value>Bankleitzahl</value>
            </de>
            <en>
                <value>Bank Code</value>
            </en>
        </phrase>
        <phrase>
            <key>TEXT_PAYMILL_ELV_OWNER</key>
            <class>store</class>
            <de>
                <value>Kontoinahber</value>
            </de>
            <en>
                <value>Account Owner</value>
            </en>
        </phrase>
        <phrase>
            <key>TEXT_PAYMILL_LABEL_CC</key>
            <class>store</class>
            <de>
                <value>Sichere Kreditkartenzahlung powered by</value>
            </de>
            <en>
                <value>Secure credit card payment powered by</value>
            </en>
        </phrase>
        <phrase>
            <key>TEXT_PAYMILL_LABEL_ELV</key>
            <class>store</class>
            <de>
                <value>Lastschrift powered by</value>
            </de>
            <en>
                <value>Direct debit payment powered by</value>
            </en>
        </phrase>
        <phrase>
            <key>TEXT_PAYMILL_CC_ERR_NUMBER</key>
            <class>store</class>
            <de>
                <value>Ihre Kreditkartennummer ist ungültig.</value>
            </de>
            <en>
                <value>Your credit card number is invalid.</value>
            </en>
        </phrase>
        <phrase>
            <key>TEXT_PAYMILL_CC_ERR_DATE</key>
            <class>store</class>
            <de>
                <value>Das Gültigkeitsdatum ist ungültig.</value>
            </de>
            <en>
                <value>The expiry date is invalid.</value>
            </en>
        </phrase>
        <phrase>
            <key>TEXT_PAYMILL_CC_ERR_CVC</key>
            <class>store</class>
            <de>
                <value>Die Kartenprüfnummer ist ungültig.</value>
            </de>
            <en>
                <value>Your credit card verification code is invalid.</value>
            </en>
        </phrase>
        <phrase>
            <key>TEXT_PAYMILL_CC_ERR_HOLDER</key>
            <class>store</class>
            <de>
                <value>Bitte geben Sie den Karteninhaber an.</value>
            </de>
            <en>
                <value>Credit Card Holder is missing.</value>
            </en>
        </phrase>
        <phrase>
            <key>TEXT_PAYMILL_ELV_ERR_HOLDER</key>
            <class>store</class>
            <de>
                <value>Bitte geben Sie den Kontoinhaber an.</value>
            </de>
            <en>
                <value>Account Holder is missing.</value>
            </en>
        </phrase>
        <phrase>
            <key>TEXT_PAYMILL_ELV_ERR_BANK_CODE</key>
            <class>store</class>
            <de>
                <value>Die Bankleitzahl ist ungültig.</value>
            </de>
            <en>
                <value>The sort code is invalid.</value>
            </en>
        </phrase>
        <phrase>
            <key>TEXT_PAYMILL_ELV_ERR_ACCOUNT_NUMBER</key>
            <class>store</class>
            <de>
                <value>Die Kontonummer ist ungültig.</value>
            </de>
            <en>
                <value>The account number is invalid.</value>
            </en>
        </phrase>
        <phrase>
            <key>TEXT_PAYMILL_ERR_TOKEN</key>
            <class>store</class>
            <de>
                <value>Es trat ein Fehler während Ihrer Token erstellung auf.</value>
            </de>
            <en>
                <value>An error has occurred during token creation.</value>
            </en>
        </phrase>
        <phrase>
            <key>TEXT_PAYMILL_ERR_ORDER</key>
            <class>store</class>
            <de>
                <value>Es trat ein Fehler während Ihrer Bestellung auf.</value>
            </de>
            <en>
                <value>An error has occurred during order creation.</value>
            </en>
        </phrase>
    </language_content>
</xtcommerceplugin>